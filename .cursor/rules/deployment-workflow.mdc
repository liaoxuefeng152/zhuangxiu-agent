---
description: 开发部署流程 - 本地修改 → Git 提交 → 阿里云更新
alwaysApply: true
---

# 部署流程规范

本项目使用**阿里云开发环境**（120.26.201.61），每次改动必须按以下顺序执行：

## 1. 在本地项目修改

- 所有代码改动先在本地项目 `/Users/mac/zhuangxiu-agent-backup-dev` 完成
- 修改后本地测试验证

## 2. 提交到 Git

```bash
git add .
git commit -m "描述本次修改"
git push
```

## 3. 更新阿里云开发环境

- **服务器项目目录**：`/root/project/dev/zhuangxiu-agent`
- **开发后端容器**：`zhuangxiu-backend-dev`
- **SSH连接命令**：`ssh -i ~/zhuangxiu-agent1.pem root@120.26.201.61`
- **更新步骤**：SSH 登录后拉取最新代码，重新构建并重启容器

```bash
# SSH登录（使用密钥文件）
ssh -i ~/zhuangxiu-agent1.pem root@120.26.201.61

# 进入项目目录
cd /root/project/dev/zhuangxiu-agent

# 拉取最新代码
git pull

# 重启后端服务
docker compose -f docker-compose.dev.yml restart backend

# 或使用容器名称直接重启
docker restart zhuangxiu-backend-dev
```

**重要提醒**：
- ✅ 每次更新代码后，必须先 `git push` 到远程仓库
- ✅ 然后SSH到服务器执行 `git pull` 更新代码
- ✅ 最后重启后端服务使代码生效
- ❌ **禁止**：直接修改阿里云服务器上的代码，或跳过 Git 推送直接部署
