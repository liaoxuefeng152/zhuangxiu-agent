"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[76],{4532:function(e,t,n){n.d(t,{ri:function(){return c}});var r=n(9379),o=n(3816),s={userInfo:null,isLoggedIn:!1},u=(0,o.Z0)({name:"user",initialState:s,reducers:{setUserInfo:function(e,t){e.userInfo=t.payload,e.isLoggedIn=!0},logout:function(e){e.userInfo=null,e.isLoggedIn=!1},updateUserInfo:function(e,t){e.userInfo&&(e.userInfo=(0,r.A)((0,r.A)({},e.userInfo),t.payload))}}}),a=u.actions,c=(a.setUserInfo,a.logout);a.updateUserInfo;t.Ay=u.reducer},4746:function(e,t,n){n.d(t,{MH:function(){return i},i$:function(){return c}});var r=n(758),o=n.n(r),s=n(1083),u="https://your-domain.com/api/v1",a=s.A.create({baseURL:u,timeout:3e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(function(e){var t=o().getStorageSync("access_token");t&&(e.headers.Authorization="Bearer ".concat(t));var n=o().getStorageSync("user_id");return n&&(e.headers["X-User-Id"]=n),e},function(e){return Promise.reject(e)}),a.interceptors.response.use(function(e){var t=e.data,n=t.code,r=t.msg,s=t.data;return 0===n?s:(o().showToast({title:r||"\u8bf7\u6c42\u5931\u8d25",icon:"none",duration:2e3}),Promise.reject(new Error(r||"\u8bf7\u6c42\u5931\u8d25")))},function(e){var t="\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25";if(e.response){var n=e.response.status;switch(n){case 401:t="\u767b\u5f55\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",o().removeStorageSync("access_token"),o().removeStorageSync("user_id"),o().reLaunch({url:"/pages/onboarding/index"});break;case 403:t="\u65e0\u6743\u9650\u8bbf\u95ee";break;case 404:t="\u8bf7\u6c42\u7684\u8d44\u6e90\u4e0d\u5b58\u5728";break;case 500:t="\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef";break;default:t="\u8bf7\u6c42\u9519\u8bef: ".concat(n)}}else e.request&&(t="\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc");return o().showToast({title:t,icon:"none",duration:2e3}),Promise.reject(e)});var c={login:function(e){return a.post("/users/login",{code:e})},getProfile:function(){return a.get("/users/profile")},updateProfile:function(e){return a.put("/users/profile",e)}},i={getSchedule:function(){return a.get("/constructions/schedule")},setStartDate:function(e){return a.post("/constructions/start-date",{start_date:e})},updateStageStatus:function(e,t){return a.put("/constructions/stage-status",{stage:e,status:t})},resetSchedule:function(){return a.delete("/constructions/schedule")}}}}]);