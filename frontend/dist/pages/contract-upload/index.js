"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[7349],{9872:function(n,e,a){var s=a(7842),c=a(1212),t=a(467),i=a(5544),o=a(6540),l=a(118),r=a(758),u=a.n(r),p=a(4746),d=a(2719),h=a(3247),f=a(5649),m=a(4848),x=function(){var n=(0,o.useState)(null),e=(0,i.A)(n,2),a=e[0],s=e[1],r=(0,o.useState)(!1),x=(0,i.A)(r,2),g=x[0],v=x[1],j=u().getStorageSync("has_company_scan"),N=function(){u().showActionSheet({itemList:["\u9009\u62e9\u6587\u4ef6","\u62cd\u7167\u4e0a\u4f20"],success:function(n){0===n.tapIndex?w():y()},fail:function(){}})},w=function(){u().chooseMessageFile({count:1,type:"file",extension:["pdf","jpg","jpeg","png"],success:function(n){var e=n.tempFiles[0];e.size>10485760?u().showToast({title:"\u6587\u4ef6\u4e0d\u80fd\u8d85\u8fc710MB",icon:"none"}):s({path:e.path,name:e.name,size:e.size})},fail:function(n){var e;null!==n&&void 0!==n&&null!==(e=n.errMsg)&&void 0!==e&&e.includes("cancel")||u().showToast({title:"\u9009\u62e9\u5931\u8d25",icon:"none"})}})},y=function(){var n=u().chooseImage({count:1,sourceType:["camera"],success:function(n){var e=n.tempFilePaths[0];s({path:e,name:"contract_".concat(Date.now(),".jpg"),size:0})},fail:function(n){var e;null!==n&&void 0!==n&&null!==(e=n.errMsg)&&void 0!==e&&e.includes("cancel")||u().showToast({title:"\u9009\u62e9\u5931\u8d25",icon:"none"})}});n&&"function"===typeof n.catch&&n.catch(function(){})},k=function(){var n=(0,t.A)((0,c.A)().m(function n(){var e,s,t,i;return(0,c.A)().w(function(n){while(1)switch(n.p=n.n){case 0:if(a){n.n=1;break}return u().showToast({title:"\u8bf7\u5148\u9009\u62e9\u6216\u62cd\u6444\u6587\u4ef6",icon:"none"}),n.a(2);case 1:if((0,f.wD)()){n.n=2;break}return n.a(2);case 2:return n.p=2,n.n=3,p.contractApi.upload(a.path,a.name);case 3:t=n.v,i=null!==(e=null!==(s=null===t||void 0===t?void 0:t.task_id)&&void 0!==s?s:null===t||void 0===t?void 0:t.id)&&void 0!==e?e:0,u().navigateTo({url:"/pages/scan-progress/index?scanId=".concat(i,"&companyName=&type=contract")}),n.n=5;break;case 4:n.p=4,n.v,u().navigateTo({url:"/pages/scan-progress/index?scanId=0&companyName=&type=contract"});case 5:return n.a(2)}},n,null,[[2,4]])}));return function(){return n.apply(this,arguments)}}();return(0,m.jsxs)(l.Ss,{className:"upload-page",children:[!j&&(0,m.jsxs)(l.Ss,{className:"warn-bar",children:[(0,m.jsx)(l.EY,{className:"warn-text",children:"\u26a0\ufe0f \u672a\u68c0\u6d4b\u88c5\u4fee\u516c\u53f8\uff0c\u5206\u6790\u7ed3\u679c\u53ef\u80fd\u5b58\u5728\u504f\u5dee"}),(0,m.jsx)(l.EY,{className:"link",onClick:function(){return u().navigateTo({url:"/pages/company-scan/index"})},children:"\u7acb\u5373\u68c0\u6d4b"})]}),(0,m.jsxs)(l.Ss,{className:"upload-area",onClick:N,children:[(0,m.jsx)(l.EY,{className:"upload-icon",children:"\ud83d\udcdc"}),(0,m.jsx)(l.EY,{className:"upload-text",children:"\u70b9\u51fb\u4e0a\u4f20\u88c5\u4fee\u5408\u540cPDF/JPG/PNG"}),(0,m.jsx)(l.EY,{className:"upload-hint",children:"\u5355\u6587\u4ef6\u226410MB"}),a&&(0,m.jsx)(l.Ss,{className:"progress-bar-wrap",children:(0,m.jsx)(l.Ss,{className:"progress-fill",style:{width:"100%"}})}),(0,m.jsx)(l.EY,{className:"example-link",onClick:function(n){n.stopPropagation(),v(!0)},children:"\u793a\u4f8b\u67e5\u770b"}),a&&(0,m.jsxs)(l.Ss,{className:"file-info",children:[(0,m.jsx)(l.EY,{children:a.name}),(0,m.jsx)(l.EY,{className:"change",onClick:function(n){n.stopPropagation(),s(null)},children:"\u66f4\u6362\u6587\u4ef6"})]})]}),(0,m.jsx)(l.EY,{className:"bottom-hint",children:"\u8bf7\u4e0a\u4f20\u6e05\u6670\u7684\u5408\u540c\u539f\u4ef6\uff0c\u542b\u7532\u4e59\u53cc\u65b9\u6761\u6b3e/\u7b7e\u5b57/\u76d6\u7ae0"}),(0,m.jsx)(l.Ss,{className:"btn primary full",onClick:k,style:{opacity:a?1:.5},children:(0,m.jsx)(l.EY,{children:"\u5f00\u59cb\u5ba1\u6838"})}),(0,m.jsx)(d.A,{visible:g,title:"\u5408\u540c\u793a\u4f8b",content:"\u8bf7\u4e0a\u4f20\u5305\u542b\u7532\u4e59\u53cc\u65b9\u3001\u91d1\u989d\u3001\u5de5\u671f\u7b49\u6761\u6b3e\u7684\u5b8c\u6574\u5408\u540c\uff0c\u683c\u5f0f\u6e05\u6670\u4fbf\u4e8eAI\u5206\u6790",imageUrl:h.uK.contract,onClose:function(){return v(!1)}}),(0,m.jsx)(l.EY,{className:"privacy",children:"\u4e0a\u4f20\u6587\u4ef6\u4ec5\u7528\u4e8eAI\u5206\u6790\uff0c\u672c\u5730\u52a0\u5bc6\u5b58\u50a8\uff0c\u4e0d\u4f1a\u6cc4\u9732"})]})},g=x,v={};Page((0,s.createPageConfig)(g,"pages/contract-upload/index",{root:{cn:[]}},v||{}))}},function(n){var e=function(e){return n(n.s=e)};n.O(0,[6907,8096,2076],function(){return e(9872)});n.O()}]);