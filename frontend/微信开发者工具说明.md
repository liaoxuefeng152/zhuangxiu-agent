# 微信开发者工具 - 用 frontend（Taro）调试

**是的，应该用微信开发者工具打开的是本目录 `frontend`，不是根目录下的 `miniprogram-native`。**

- **frontend**：Taro 工程，编译后生成小程序代码到 `dist/`，是当前主用小程序代码。
- **miniprogram-native**：原生小程序，可单独打开，但和 frontend 是两套实现。

## 步骤

1. **先在本机启动后端**（项目根目录）  
   ```bash
   docker-compose -f docker-compose.dev.yml up -d
   ```

2. **在 frontend 目录编译小程序（开发模式，watch）**  
   ```bash
   cd frontend
   npm install   # 首次需要
   npm run dev:weapp:local
   ```
   会生成并持续更新 `dist/`，API 地址为 `http://localhost:8000/api/v1`。

3. **用微信开发者工具打开本目录 `frontend`**  
   - 选择「导入项目」或「打开」，目录选 **当前 frontend 文件夹**（不是 dist）。
   - 工具会读取 `project.config.json`，小程序代码从 **dist/** 加载。
   - 在「详情」→「本地设置」中勾选 **「不校验合法域名、web-view（调试用）」**。

4. **自动登录**  
   开发/体验版下，若本地没有 token，会自动用 `dev_weapp_mock` 调后端登录并写入 token，可直接像真实用户一样测试各功能。

## 真机预览

真机无法访问电脑的 localhost，需：

- 把后端部署到有域名的服务器，或
- 用内网穿透把本机 8000 暴露为 https。

然后改 `config/index.js` 里开发环境的 `TARO_APP_API_BASE_URL` 为对应地址，重新编译后再用真机预览。
