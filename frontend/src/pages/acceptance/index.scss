/* P30 阶段验收/台账报告页 - 原型规范：背景 #F8F8F8，90% 宽居中，圆角 20rpx */
.acceptance-page {
  min-height: 100vh;
  background: #F8F8F8;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
}

.nav-bar {
  /* 顶部安全区：刘海/状态栏留白，避免标题被遮挡 */
  padding-top: constant(safe-area-inset-top);
  padding-top: env(safe-area-inset-top);
  padding-top: max(24px, constant(safe-area-inset-top));
  padding-top: max(24px, env(safe-area-inset-top));
  padding-left: 24rpx;
  padding-right: 24rpx;
  min-height: 88rpx;
  background: #fff;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
  box-sizing: border-box;

  .nav-back { font-size: 28rpx; color: #007AFF; }
  .nav-title { font-size: 32rpx; font-weight: 700; color: #333333; }
  .nav-right-wrap {
    display: flex;
    align-items: center;
    gap: 20rpx;
  }
  .nav-pdf {
    display: flex;
    align-items: center;
    gap: 8rpx;
    color: #007AFF;
  }
  .nav-pdf-icon { font-size: 40rpx; }
  .nav-pdf-text { font-size: 24rpx; }
  .nav-unlock { font-size: 24rpx; color: #007AFF; }
  .nav-appeal { font-size: 28rpx; color: #FF3333; }
  .nav-appeal.disabled { color: #999999; }
  .nav-placeholder { width: 100rpx; flex-shrink: 0; }
}

.reject-tip {
  background: #FFF5F5;
  padding: 20rpx 24rpx;
  display: flex;
  align-items: center;
  justify-content: space-between;
  .reject-tip-text { font-size: 26rpx; color: #FF3333; flex: 1; }
  .reject-tip-close { font-size: 36rpx; color: #999; padding: 0 8rpx; }
}

/* 微信小程序 scroll-view 不支持 padding，将 padding 移到内层 View */
.scroll-body-outer {
  flex: 1;
}
.scroll-body {
  padding: 24rpx 5% 120rpx;
  margin: 0 auto;
  max-width: 750rpx;
  box-sizing: border-box;
}

.skeleton {
  padding: 40rpx 0;
  .skeleton-line {
    height: 32rpx;
    background: linear-gradient(90deg, #eee 0%, #f5f5f5 50%, #eee 100%);
    background-size: 200% 100%;
    border-radius: 8rpx;
    margin-bottom: 24rpx;
    width: 100%;
    animation: skeleton-shine 0.8s ease-in-out infinite;
    &.short { width: 70%; }
  }
}
@keyframes skeleton-shine {
  0% { background-position: 100% 0; }
  100% { background-position: -100% 0; }
}

.load-fail {
  padding: 60rpx;
  text-align: center;
  color: #999;
  font-size: 28rpx;
}

/* 无报告时：仅提示从施工陪伴进行 AI 验收，不再提供本页上传 */
.empty-report-section {
  padding: 60rpx 32rpx;
  text-align: center;

  .empty-report-title {
    font-size: 32rpx;
    font-weight: 700;
    color: #333;
    display: block;
    margin-bottom: 16rpx;
  }
  .empty-report-desc {
    font-size: 26rpx;
    color: #666;
    display: block;
    margin-bottom: 32rpx;
  }
  .btn-back-inline {
    width: 80%;
    margin: 0 auto;
    height: 88rpx;
    border-radius: 20rpx;
    background: #007AFF;
    color: #fff;
    font-size: 28rpx;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

.section {
  width: 100%;
  margin: 0 auto 20rpx;
  background: #fff;
  border-radius: 20rpx;
  padding: 24rpx 28rpx;
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.06);
  box-sizing: border-box;

  .section-title {
    font-size: 32rpx;
    font-weight: 700;
    color: #333333;
    margin-bottom: 16rpx;
    display: block;
    text-align: left;
  }
  .section-desc {
    font-size: 28rpx;
    color: #666666;
    margin-bottom: 20rpx;
    display: block;
  }
}

.upload-section {
  .upload-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 16rpx;

    .thumb-wrap {
      position: relative;
      width: 80rpx;
      height: 80rpx;
      border-radius: 12rpx;
      overflow: hidden;

      .thumb {
        width: 100%;
        height: 100%;
      }
      .remove {
        position: absolute;
        top: 4rpx;
        right: 4rpx;
        width: 36rpx;
        height: 36rpx;
        background: rgba(0, 0, 0, 0.5);
        color: #fff;
        text-align: center;
        line-height: 36rpx;
        font-size: 28rpx;
        border-radius: 50%;
      }
    }
    .upload-btn {
      width: 80rpx;
      height: 80rpx;
      border: 2rpx dashed #d9d9d9;
      border-radius: 12rpx;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;

      .plus { font-size: 36rpx; color: #8C8C8C; }
      .hint { font-size: 24rpx; color: #8C8C8C; margin-top: 4rpx; }
    }
  }
}

.analyzing {
  padding: 60rpx;
  text-align: center;
  color: #666;
  font-size: 28rpx;

  .loading-icon {
    font-size: 64rpx;
    display: block;
    margin-bottom: 20rpx;
  }
}

/* 验收概览：与 section 同宽，左右 5% 留白 */
.overview-card {
  width: 100%;
  margin: 0 auto 24rpx;
  background: #fff;
  border-radius: 20rpx;
  padding: 28rpx;
  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.06);
  box-sizing: border-box;

  .overview-status-row {
    display: flex;
    align-items: center;
    gap: 12rpx;
    margin-bottom: 16rpx;
  }
  .status-tag {
    display: inline-block;
    padding: 8rpx 20rpx;
    border-radius: 12rpx;
    font-size: 26rpx;
    &.pass { background: #E6F9F0; color: #00CC66; }
    &.pending { background: #FFF7E5; color: #FF9900; }
    &.fail { background: #FFE5E5; color: #FF3333; }
  }
  .status-appeal-tag { font-size: 20rpx; color: #FF3333; }
  .overview-time {
    display: block;
    font-size: 24rpx;
    color: #999999;
    margin-bottom: 8rpx;
  }
  .overview-data {
    display: block;
    font-size: 32rpx;
    font-weight: 700;
    color: #333333;
  }
}

/* 验收详情列表：每条 100rpx 高、16rpx 内边距、20rpx 圆角 */
.list-section {
  .detail-row {
    min-height: 100rpx;
    padding: 20rpx;
    margin-bottom: 16rpx;
    border-radius: 20rpx;
    background: #fafafa;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: opacity 0.2s ease;

    &:last-child { margin-bottom: 0; }
  }
  .detail-left {
    flex: 1;
    min-width: 0;
  }
  .detail-name {
    font-size: 28rpx;
    color: #333333;
    display: block;
    margin-bottom: 8rpx;
  }
  .detail-standard {
    font-size: 24rpx;
    color: #999999;
    display: block;
  }
  .detail-right {
    display: flex;
    align-items: center;
    gap: 16rpx;
  }
  .result-tag {
    font-size: 24rpx;
    padding: 4rpx 12rpx;
    border-radius: 8rpx;
    &.pass { background: #E6F9F0; color: #00CC66; }
    &.fail { background: #FFE5E5; color: #FF3333; }
  }
  .link-detail {
    font-size: 24rpx;
    color: #007AFF;
  }
  .preview-lock-tip {
    margin-top: 16rpx;
    padding: 16rpx;
    background: #FFF7E5;
    border-radius: 12rpx;
  }
  .preview-lock-text {
    font-size: 24rpx;
    color: #FF9900;
  }
}

/* 未解锁时 section 遮蔽层 */
.section-locked {
  position: relative;
}
.section-lock-overlay {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 20rpx;
}
.section-lock-text {
  font-size: 28rpx;
  color: #FF9900;
}

/* 不合格项整改区：V2.6.4 删除预约人工监理 */
.rectify-section {
  .rectify-title-row {
    display: flex;
    align-items: center;
    gap: 12rpx;
    margin-bottom: 16rpx;
  }
  .rectify-badge {
    font-size: 24rpx;
    color: #FF9900;
    padding: 4rpx 12rpx;
    background: #FFF7E5;
    border-radius: 8rpx;
  }
  .rectify-desc {
    font-size: 28rpx;
    color: #666666;
    margin-bottom: 24rpx;
    display: block;
    line-height: 1.5;
  }
  .rectify-photos-row {
    margin-bottom: 24rpx;
  }
  .rectify-photos-label {
    font-size: 26rpx;
    color: #666;
    display: block;
    margin-bottom: 12rpx;
  }
  .rectify-photos-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 12rpx;
    margin-bottom: 16rpx;
  }
  .rectify-photo-wrap {
    position: relative;
    width: 80rpx;
    height: 80rpx;
    border-radius: 12rpx;
    overflow: hidden;
  }
  .rectify-photo {
    width: 100%;
    height: 100%;
  }
  .rectify-photo-del {
    position: absolute;
    top: 4rpx;
    right: 4rpx;
    width: 32rpx;
    height: 32rpx;
    background: rgba(0,0,0,0.5);
    color: #fff;
    text-align: center;
    line-height: 32rpx;
    font-size: 24rpx;
    border-radius: 50%;
  }
  .rectify-photo-add {
    width: 80rpx;
    height: 80rpx;
    border: 2rpx dashed #d9d9d9;
    border-radius: 12rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36rpx;
    color: #999;
  }
  .rectify-btn.complete {
    width: 100%;
    margin-top: 8rpx;
    background: #007AFF;
    color: #fff;
    border: none;
  }
  .rectify-actions {
    display: flex;
    gap: 16rpx;
  }
  .rectify-recheck-exhausted {
    flex: 1;
    height: 88rpx;
    border-radius: 20rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28rpx;
    background: #e8e8e8;
    color: #999;
  }
  .rectify-btn {
    flex: 1;
    height: 88rpx;
    border-radius: 20rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28rpx;
    border: 1rpx solid #007AFF;
    color: #007AFF;
    &.primary {
      background: #007AFF;
      color: #fff;
      border-color: #007AFF;
    }
    &.yellow {
      background: #FFB800;
      color: #fff;
      border-color: #FFB800;
    }
    &.orange {
      background: #FF9900;
      color: #FFFFFF;
      border-color: #FF9900;
    }
  }
}

/* 施工照片区 */
.photo-section {
  .photo-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 10rpx;
  }
  .photo-thumb {
    width: 80rpx;
    height: 80rpx;
    border-radius: 12rpx;
    background: #f0f0f0;
  }
  .photo-thumb-error {
    width: 80rpx;
    height: 80rpx;
    border-radius: 12rpx;
    background: #e8e8e8;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .photo-error-icon { font-size: 28rpx; }
  .photo-error-tap { font-size: 20rpx; color: #999; margin-top: 4rpx; }
  .photo-more {
    width: 80rpx;
    height: 80rpx;
    border-radius: 12rpx;
    background: #eee;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24rpx;
    color: #999;
  }
}

/* 功能操作区 */
.action-row {
  width: 100%;
  margin: 0 auto 20rpx;
  display: flex;
  align-items: center;
  justify-content: space-between;

  .action-left {
    display: flex;
    gap: 20rpx;
  }
  .action-link {
    font-size: 28rpx;
    color: #666666;
  }
  .btn-ai {
    height: 88rpx;
    padding: 0 32rpx;
    border-radius: 20rpx;
    background: #007AFF;
    color: #fff;
    font-size: 28rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    &.btn-ai-yellow {
      background: #FFB800;
    }
  }
}

/* 底部：返回施工陪伴 */
.back-wrap {
  width: 100%;
  margin: 20rpx auto 0;
}
.btn-back {
  width: 100%;
  height: 88rpx;
  border-radius: 20rpx;
  background: #007AFF;
  color: #fff;
  font-size: 28rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.1s ease;
  &:active { transform: scale(0.95); }
}

/* 所有主按钮 0.1s 按压缩放 */
.rectify-btn,
.btn-ai,
.detail-modal-btn,
.appeal-btn {
  transition: transform 0.1s ease;
  &:active { transform: scale(0.95); }
}

/* 查看详情弹窗 */
.detail-modal-mask {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 40rpx;
  box-sizing: border-box;
}
.detail-modal {
  width: 90%;
  max-height: 80vh;
  background: #fff;
  border-radius: 20rpx;
  padding: 32rpx;
  position: relative;

  .detail-modal-close {
    position: absolute;
    top: 24rpx;
    right: 24rpx;
    font-size: 40rpx;
    color: #999;
  }
  .detail-modal-title {
    font-size: 32rpx;
    font-weight: 700;
    color: #333;
    display: block;
    margin-bottom: 24rpx;
    padding-right: 48rpx;
  }
  .detail-modal-photo-wrap {
    margin-bottom: 20rpx;
  }
  .detail-modal-photo {
    width: 200rpx;
    height: 200rpx;
    border-radius: 12rpx;
    background: #f0f0f0;
    margin-top: 8rpx;
  }
  .detail-modal-label {
    font-size: 26rpx;
    color: #999;
    display: block;
    margin-bottom: 8rpx;
  }
  .detail-modal-text {
    font-size: 28rpx;
    color: #666;
    line-height: 1.5;
    display: block;
    margin-bottom: 20rpx;
  }
  .detail-modal-btn {
    height: 88rpx;
    border-radius: 20rpx;
    background: #007AFF;
    color: #fff;
    font-size: 28rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 24rpx;
  }
  &.pop {
    animation: modal-pop 0.2s ease-out;
  }
}

@keyframes modal-pop {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

/* 申诉弹窗 85% 宽 */
.appeal-modal-mask {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1001;
  padding: 40rpx;
  box-sizing: border-box;
}
.appeal-modal {
  width: 85%;
  max-height: 85vh;
  background: #FFFFFF;
  border-radius: 20rpx;
  padding: 32rpx;
  &.pop { animation: modal-pop 0.2s ease-out; }

  .appeal-modal-title {
    font-size: 32rpx;
    font-weight: 700;
    color: #333;
    display: block;
    margin-bottom: 24rpx;
  }
  .recheck-modal-desc {
    font-size: 26rpx;
    color: #666;
    margin-bottom: 24rpx;
    line-height: 1.5;
  }
  .appeal-input {
    width: 100%;
    min-height: 160rpx;
    padding: 20rpx;
    border: 1rpx solid #eee;
    border-radius: 12rpx;
    font-size: 28rpx;
    box-sizing: border-box;
  }
  .appeal-placeholder { color: #999; }
  .appeal-count {
    display: block;
    text-align: right;
    font-size: 24rpx;
    color: #999;
    margin-top: 8rpx;
  }
  .appeal-images-wrap { margin-top: 24rpx; }
  .appeal-images-label {
    font-size: 26rpx;
    color: #666;
    display: block;
    margin-bottom: 12rpx;
  }
  .appeal-images-row {
    display: flex;
    flex-wrap: wrap;
    gap: 16rpx;
  }
  .appeal-img-wrap {
    position: relative;
    width: 120rpx;
    height: 120rpx;
    border-radius: 12rpx;
    overflow: hidden;
  }
  .appeal-img { width: 100%; height: 100%; }
  .appeal-img-del {
    position: absolute;
    top: 4rpx;
    right: 4rpx;
    width: 36rpx;
    height: 36rpx;
    background: rgba(0,0,0,0.5);
    color: #fff;
    text-align: center;
    line-height: 36rpx;
    font-size: 28rpx;
    border-radius: 50%;
  }
  .appeal-img-add {
    width: 120rpx;
    height: 120rpx;
    border: 2rpx dashed #d9d9d9;
    border-radius: 12rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40rpx;
    color: #999;
  }
  .appeal-modal-actions {
    display: flex;
    gap: 24rpx;
    margin-top: 32rpx;
  }
  .appeal-btn {
    flex: 1;
    height: 88rpx;
    border-radius: 20rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28rpx;
    &.cancel {
      background: #f5f5f5;
      color: #666;
    }
    &.submit {
      background: #007AFF;
      color: #fff;
      &.disabled {
        background: #e5e5e5;
        color: #999;
      }
    }
  }
}

.appeal-success-mask {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1002;
  padding: 40rpx;
}
.appeal-success {
  width: 85%;
  background: #fff;
  border-radius: 20rpx;
  padding: 40rpx;
  &.pop { animation: modal-pop 0.2s ease-out; }
  .appeal-success-title {
    font-size: 32rpx;
    font-weight: 700;
    color: #333;
    display: block;
    margin-bottom: 16rpx;
  }
  .appeal-success-desc {
    font-size: 28rpx;
    color: #666;
    line-height: 1.5;
    display: block;
    margin-bottom: 32rpx;
  }
  .appeal-success-btn {
    height: 88rpx;
    border-radius: 20rpx;
    background: #007AFF;
    color: #fff;
    font-size: 28rpx;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}
