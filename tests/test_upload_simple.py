#!/usr/bin/env python3
"""
测试AI设计师图片上传修复 - 简化版
"""
import requests
import json
import os

BASE_URL = "http://120.26.201.61:8001/api/v1"
# 使用用户提供的token
TOKEN = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxLCJvcGVuaWQiOiJvQlRKZzNhSzE5S3lXc1lRZUNvU25NVng1aENnIiwiZXhwIjoxNzcyMDk2MDQzfQ.tTHm-zDkKFTOQaikqmTVq7j3KSJz0laph75Q3_VtTA0"
USER_ID = 1

def test_upload_image():
    """测试图片上传功能"""
    print("=== 测试AI设计师图片上传修复 ===")
    
    # 创建测试图片文件
    test_file = "test_upload.jpg"
    # 创建一个简单的JPEG文件
    with open(test_file, "wb") as f:
        # 最小有效的JPEG文件
        f.write(b'\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01\x01\x00\x00\x01\x00\x01\x00\x00\xff\xdb\x00C\x00\x08\x06\x06\x07\x06\x05\x08\x07\x07\x07\t\t\x08\n\x0c\x14\r\x0c\x0b\x0b\x0c\x19\x12\x13\x0f\x14\x1d\x1a\x1f\x1e\x1d\x1a\x1c\x1c $.\' ",#\x1c\x1c(7),01444\x1f\'9=82<.342\xff\xc0\x00\x0b\x08\x00\x01\x00\x01\x01\x01\x11\x00\xff\xc4\x00\x1f\x00\x00\x01\x05\x01\x01\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\xff\xc4\x00\xb5\x10\x00\x02\x01\x03\x03\x02\x04\x03\x05\x05\x04\x04\x00\x00\x01}\x01\x02\x03\x00\x04\x11\x05\x12!1A\x06\x13Qa\x07"q\x142\x81\x91\xa1\x08#B\xb1\xc1\x15R\xd1\xf0$3br\x82\t\n\x16\x17\x18\x19\x1a%&\'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz\x83\x84\x85\x86\x87\x88\x89\x8a\x92\x93\x94\x95\x96\x97\x98\x99\x9a\xa2\xa3\xa4\xa5\xa6\xa7\xa8\xa9\xaa\xb2\xb3\xb4\xb5\xb6\xb7\xb8\xb9\xba\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xd2\xd3\xd4\xd5\xd6\xd7\xd8\xd9\xda\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xf1\xf2\xf3\xf4\xf5\xf6\xf7\xf8\xf9\xfa\xff\xda\x00\x08\x01\x01\x00\x00?\x00\xab\xe0\xbf\x05\xe9\x1a\xa7\x85\xacn\xee\xa1v\x9aE`\xc4H\xc3\xa3\x11\xd8\xd6\xff\x00\xfc+\xbd\x03\xfexI\xff\x00\x7f\x9b\xfch\xff\x00\x85w\xa0\x7f\xcf\t?\xef\xf3\x7f\x8d\x1f\xf0\xae\xf4\x0f\xf9\xe1\'\xfd\xfeo\xf1\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xe8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdz?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\xbf\xdf\xfdj?\xe1]\xe8\x1f\xf3\xc1\xff\x00\xef\xf7\xff\x00Z\x8f\xf8Wz\x07\xfc\xf0\x7f\xfb\xfd\xff\x00\xd6\xa3\xfe\x15\xde\x81\xff\x00<\x1f\xfe\xff\x00\x7f\xf5\xa8\xff\x00\x85w\xa0\x7f\xcf\x07\xff\x00\x
