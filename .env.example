# ============================================
# 装修决策Agent - 环境变量模板
# ============================================
# 重要：请勿提交包含真实敏感信息的配置文件到版本控制
# 将此文件复制为 .env.dev（开发环境）或 .env.prod（生产环境）
# 并根据实际环境填写相应的值

# ============================================
# 应用基础配置
# ============================================

# 应用名称
APP_NAME=装修决策Agent

# 调试模式（开发环境设为 True，生产环境必须设为 False）
DEBUG=True

# 应用版本（从代码中自动读取，无需修改）
VERSION=2.2.0

# ============================================
# 数据库配置
# ============================================

# PostgreSQL 数据库连接字符串
# 格式：postgresql+asyncpg://用户名:密码@主机:端口/数据库名
DATABASE_URL=postgresql+asyncpg://username:password@localhost:5432/database_name

# 数据库连接池配置
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# ============================================
# Redis 配置
# ============================================

# Redis 连接字符串
# 格式：redis://:密码@主机:端口/数据库编号
REDIS_URL=redis://:password@localhost:6379/0

# Redis 密码（如果 URL 中已包含密码，此项可选）
REDIS_PASSWORD=your_redis_password

# ============================================
# 微信小程序配置
# ============================================

# 微信小程序 AppID
WECHAT_APP_ID=your_wechat_app_id

# 微信小程序 AppSecret
WECHAT_APP_SECRET=your_wechat_app_secret

# 微信回调 Token（用于接口配置验证）
WECHAT_CALLBACK_TOKEN=your_callback_token

# 微信模板消息 ID（家装服务进度提醒）
WECHAT_TEMPLATE_PROGRESS_REMINDER=your_template_id

# ============================================
# 微信支付配置
# ============================================

# 微信商户号
WECHAT_MCH_ID=your_mch_id

# 微信支付 API 密钥
WECHAT_API_KEY=your_api_key

# 微信支付回调地址
WECHAT_NOTIFY_URL=https://your-domain.com/api/v1/payments/wechat/callback

# ============================================
# 阿里云配置
# ============================================

# 阿里云 AccessKey ID（生产环境建议使用 RAM 角色）
ALIYUN_ACCESS_KEY_ID=your_access_key_id

# 阿里云 AccessKey Secret（生产环境建议使用 RAM 角色）
ALIYUN_ACCESS_KEY_SECRET=your_access_key_secret

# 阿里云 OCR 服务端点
ALIYUN_OCR_ENDPOINT=ocr-api.cn-hangzhou.aliyuncs.com

# 阿里云 OSS Bucket（轮播图）
ALIYUN_OSS_BUCKET=your-bucket-name

# 阿里云 OSS Bucket（照片上传）
ALIYUN_OSS_BUCKET1=your-photo-bucket-name

# 阿里云 OSS 端点
ALIYUN_OSS_ENDPOINT=oss-cn-hangzhou.aliyuncs.com

# ============================================
# 第三方 API 配置
# ============================================

# 天眼查 Token
TIANYANCHA_TOKEN=your_tianyancha_token

# 聚合数据 Token（司法查询）
JUHECHA_TOKEN=your_juhecha_token
JUHECHA_API_BASE=http://v.juhe.cn
JUHECHA_SIFA_ENDPOINT=/sifa/ent

# 聚合数据 Token（企业工商信息）
SIMPLE_LIST_TOKEN=your_simple_list_token
JUHECHA_ENTERPRISE_API_BASE=http://japi.juhe.cn
JUHECHA_ENTERPRISE_ENDPOINT=/enterprise/simpleList

# ============================================
# AI 服务配置
# ============================================

# DeepSeek API（备用 AI 服务）
DEEPSEEK_API_KEY=your_deepseek_api_key
DEEPSEEK_API_BASE=https://api.deepseek.com/v1

# 扣子 Coze 智能体配置（方式一：开放平台）
COZE_API_TOKEN=your_coze_api_token
COZE_BOT_ID=your_bot_id
COZE_API_BASE=https://api.coze.cn

# 扣子 Coze 智能体配置（方式二：发布站点）
COZE_SITE_URL=https://your-site.coze.site
COZE_SITE_TOKEN=your_site_token
COZE_PROJECT_ID=your_project_id
COZE_SESSION_ID=optional_session_id

# AI 设计师智能体配置
DESIGN_SITE_URL=https://your-designer-site.coze.site/stream_run
DESIGN_SITE_TOKEN=your_designer_token
DESIGN_PROJECT_ID=your_designer_project_id

# ============================================
# JWT 和安全配置
# ============================================

# JWT 密钥（生产环境必须使用强密码）
SECRET_KEY=your-secret-key-change-in-production

# JWT 算法
ALGORITHM=HS256

# 访问令牌过期时间（分钟）
ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7天

# ============================================
# 文件上传配置
# ============================================

# 最大上传文件大小（字节）
MAX_UPLOAD_SIZE=10485760  # 10MB

# 允许的文件类型
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png

# ============================================
# CORS 配置
# ============================================

# 允许的源（生产环境必须指定具体域名）
ALLOWED_ORIGINS=http://localhost:10086,https://lakeli.top,https://www.lakeli.top

# 允许的方法
ALLOWED_METHODS=GET,POST,PUT,DELETE

# 允许的请求头
ALLOWED_HEADERS=Authorization,Content-Type,X-User-Id

# ============================================
# API 限流配置
# ============================================

# 启用限流
RATE_LIMIT_ENABLED=True

# 默认限流规则
DEFAULT_RATE_LIMIT=200/minute

# 扫描限流规则
SCAN_RATE_LIMIT=10/minute

# 上传限流规则
UPLOAD_RATE_LIMIT=5/minute

# ============================================
# 定价配置
# ============================================

# 报告定价
REPORT_SINGLE_PRICE=9.9
REPORT_THREE_PRICE=25.0
SUPERVISION_SINGLE_PRICE=99.0
SUPERVISION_PACKAGE_PRICE=268.0

# 会员定价
MEMBER_MONTHLY_PRICE=29.9
MEMBER_QUARTERLY_PRICE=69.9
MEMBER_YEARLY_PRICE=268.0

# ============================================
# 告警通知配置
# ============================================

# 启用告警
ALERT_ENABLED=True
ALERT_LEVEL=warning

# 邮件告警配置
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_email_password
ALERT_EMAIL_FROM=your_email@gmail.com
ALERT_EMAIL_TO=admin1@example.com,admin2@example.com

# 钉钉告警配置
DINGTALK_WEBHOOK_URL=https://oapi.dingtalk.com/robot/send?access_token=your_token
DINGTALK_SECRET=your_secret
DINGTALK_AT_MOBILES=13800138000,13900139000
DINGTALK_AT_ALL=false

# ============================================
# 监控和备份配置
# ============================================

# 监控配置
MONITOR_ENABLED=True
MONITOR_INTERVAL_SECONDS=300
METRIC_RETENTION_DAYS=30

# 备份配置
BACKUP_ENABLED=True
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_STORAGE_PATH=/var/backups/zhuangxiu-agent
BACKUP_VERIFICATION_ENABLED=True

# ============================================
# 环境特定配置
# ============================================

# 开发环境专用配置（生产环境不要设置）
# DEV_ONLY_CONFIG=development_value

# 生产环境专用配置
# PROD_ONLY_CONFIG=production_value

# ============================================
# 重要提醒
# ============================================

# 1. 生产环境必须设置 DEBUG=False
# 2. 生产环境必须使用强密码替换所有默认密码
# 3. 生产环境建议使用 RAM 角色而非 AccessKey
# 4. 生产环境的 CORS 配置不能使用通配符
# 5. 所有敏感信息必须通过安全的方式存储和传递
# 6. 定期轮换密钥和密码

# ============================================
# 配置验证
# ============================================

# 配置完成后，运行以下命令验证配置：
# python -c "from backend.app.core.config import settings; print('配置验证通过')"
