# 设置OSS Bucket为公共读 - 解决施工照片预览问题

## 问题描述
施工照片无法预览，原因是OSS bucket当前是私有权限，需要签名URL才能访问。签名URL生成可能有问题，导致照片无法预览。

## 解决方案
将OSS bucket `zhuangxiu-images-dev-photo` 设置为**公共读**，这样照片URL可以直接访问，无需签名。

## 操作步骤

### 步骤1：登录阿里云OSS控制台
1. 访问 [阿里云OSS控制台](https://oss.console.aliyun.com/)
2. 使用您的阿里云账号登录

### 步骤2：找到目标Bucket
1. 在Bucket列表中找到 `zhuangxiu-images-dev-photo`
2. 点击Bucket名称进入详情页

### 步骤3：设置公共读权限
1. 在左侧菜单选择 **"权限管理"**
2. 点击 **"Bucket权限管理"** 标签页
3. 找到 **"公共读写"** 部分
4. 点击 **"设置"** 按钮
5. 选择 **"公共读"** 选项
6. 点击 **"确定"** 保存设置

### 步骤4：验证设置
1. 设置完成后，Bucket的权限状态应该显示为 **"公共读"**
2. 您可以上传一个测试文件，然后尝试直接通过URL访问
3. 测试URL格式：`https://zhuangxiu-images-dev-photo.oss-cn-hangzhou.aliyuncs.com/construction/1/test.jpg`

## 注意事项

### 安全性考虑
1. **公共读意味着任何人都可以访问bucket中的文件**
2. 对于开发环境，这通常是可接受的
3. 对于生产环境，建议使用签名URL保持安全性

### 成本考虑
1. 公共读可能增加流量费用（如果被大量访问）
2. 开发环境通常流量较小，影响有限

### 测试照片预览
设置公共读后，请测试：
1. 上传一张施工照片
2. 在数据管理页面点击"预览"
3. 照片应该可以正常显示

## 备选方案：修复签名URL生成

如果希望保持bucket私有，需要修复签名URL生成问题。可能的问题包括：

1. **AccessKey权限不足**：确保AccessKey有足够的权限
2. **OSS SDK版本问题**：检查oss2库版本
3. **后端代码问题**：检查`oss_service.py`中的签名逻辑

## 联系支持

如果遇到问题：
1. 检查阿里云OSS文档
2. 联系阿里云技术支持
3. 查看项目日志文件

## 总结

**这是后台问题** - OSS bucket权限设置问题。将bucket设置为公共读是最快速直接的解决方案，可以立即解决照片预览问题。设置完成后，施工照片应该可以正常预览。
